<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="utf-8" />
    <title>화살표함수표현</title>
</head>
<script>
    
    // 8.10.1 callback function  - 다른 함수에 인수로 넘겨지는 함수
    
    /* 8.11 ECMAScript6 부터 추가된 함수의 기능 */
    
    /* 8.11.1 화살표 함수 표현식으로 함수 정의하기
       - 함수 리터럴(익명함수)의 단축표현.
    */
    
    var square = function(x) { return x*x; }; //기존
    
    //ECMAScript6
    var square = (x) => { return x*x; };
    var square2 = x => {return x*x; }; //인수 하나일때 괄호 생략가능.
    var square3 = () => { return 1; }; //인수가 없을때는 괄호 생략 불가.
    var square4 = (x,y,z) => {return x*y*z; };
    var square5 = x => x*x; //함수 몸통안에 문장이 return뿐이면, 중괄호와 return 키워드 생략가능
    var f = (a,b) => ( { x : a , y : b }); //몸통안에 return문이 있더라도 함수의 반환값이 객체 리터럴이면 객체 리터럴을 그룹 연산자()로 묶어야 함.
    
    //즉시 함수
    (x=>x*x)(3); //9
    
     //객체리터럴로 객체생성하기
    var objLiteral = {
        say: function(){ //메소드
            console.log(this); //object
            
            var f = function(){console.log(this);}; //Window
            f();
            var g = ()=>console.log(this); //Object 
            g();
        }
    }
      
    //obj의 함수 say()를 호출하면 say() 함수가 실행되는 문맥의 디스바인딩 컴포넌트가 객체 obj를 가르킨다.
    objLiteral.say();
    
    console.log("==============================================");
    //화살표함수는 call, apply 메소드를 이용해도 this가 변경되지 않음.
    console.log(this.name);
    var f = function (){ console.log(this.name);};
    var g = () => console.log(this.name);
    var tom = { name : "Tom" };
    f.call(tom); // "Tom" 
    g.call(tom); // ""
    
    //함수 리터럴로 정의한 함수의 this값은 함수를 호출할때 결정됨.
    function temp() { console.log(this); }    
    var a = {};
    a.temp = temp;
    //a.temp();
    

    //생성자로 사용 불가
    var Person = (name,age) => { this.name = name; this.age = age; };
    //var tom = new Person("Tom","17"); //Uncaught TypeError: Person is not a constructor
 
    
    function Test(name){
        this.name = name;
        console.log(this);
        console.log(this.name);
    }
    
    var a = new Test("mimi");
    
    
</script>    
<body>   
</body>
</html>


