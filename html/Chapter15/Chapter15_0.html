<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="utf-8" />
    <title>이벤트 처리</title>      

<script>
   
    /*
        event listener ( 이벤트 처리기 / 이벤트 리스너 )
         - event driven program에서 이벤트가 발생했을 때 실행되는 함수. 
         
            1. event 처리기 등록 방법
            - HTML 요소의 이벤트 처리기 속성에 설정
            ex) <input type="button" onclick="changeColor();">
            
            2. DOM 요소 객체의 이벤트 처리기 프로퍼티에 설정
            ex) var btn = document.getElementById("button");  btn.onclick = chageColor();
            
            3 addEventListener 메소드를 사용
            ex) var = document.getElementById("button"); btn.addEventListener("click",chageColor,false);
         
    */
    
    /*
        event listener 를 등록하고 삭제하는 방법 
         - addEventListener를 이용시 같은 요소의 같은 이벤트에 이벤트 리스너를 여러개 등록할 수 있음.
         
         ※ 사용법 
            target.addEventListener(type,listener,useCapture);
              - target : 이벤트를 등록할 DOM노드
              - type : 이벤트 유형을 뜻하는 문자열 ( ex. "click", "mouseup" 등)
              - listener : 이벤트가 발생했을 때 처리를 담당하는 callback 함수의 참조
              - useCapture : 이벤트 단계 ( true : 캡처링 , false : 버블링(DEFAULT) )
    */
  
    window.onload = function(){     
        
        var element = document.getElementById("box");
        //e -> event 객체 , e.currentTarget -> 클릭한 요소를 참조하는 요소 객체.
        //callback 함수를 익명함수로 처리.
        /*
        element.addEventListener("click",function(e){
            e.currentTarget.style.backgroundColor="red";
        },false);
        */
    
        //callback을 익명 대신 함수 선언문으로 정의
        //callback 함수를 익명함수로 처리.
        element.addEventListener("click",changeColor,false);
        
        /* removeEventListener 를 이용, 이벤트 삭제하기 */
        var elementButton = document.getElementById("button");
        
        elementButton.addEventListener("click",function(){
           console.log("Click Button");
            //※arguments.callee를 이용해서 재귀함수를 쓰지하지 말고, 함수명으로 재귀를 하자. ?????????????
           elementButton.removeEventListener("click",arguments.callee,false);
        },false);
        
             
    };//end window.onLoad
    
    function changeColor(e){
        e.currentTarget.style.backgroundColor="pink";
    }
    
    
    

</script>  
  
</head>

<body>
    <div id="box">click Me.</div>  
    <button id="button">버튼</button>
</body>
</html>






    